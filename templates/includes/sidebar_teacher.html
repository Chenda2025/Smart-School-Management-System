{% load static %}

<!-- sidebar_teacher.html â€” PERFECT & WORKING 2025 -->
<div class="sidebar" id="teacherSidebar">
    <!-- Logo & Name -->
    <div class="sidebar-header text-center py-4 position-relative">
        <!-- Background Accent -->
        <div class="position-absolute top-0 start-0 end-0 h-100 opacity-10" 
            style="background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 0 0 20px 20px;"></div>
        
        <div class="position-relative z-index-2">
            <!-- School Logo -->
            <img src="{% static 'images/school_logo.jpg' %}" 
                alt="Elite International School Logo" 
                class="logo rounded-circle border border-4 border-white shadow-lg mb-3"
                style="width: 100px; height: 100px; object-fit: cover;">
            
            <!-- School Name -->
            <h3 class="text-white fw-bold mb-1" style="font-size: 1.5rem; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
                Elite International
            </h3>
            <p class="text-white-50 small mb-0">School</p>
            
            <!-- Student Portal Label -->
            <div class="mt-3">
                <span class="badge bg-primary rounded-pill px-4 py-2 fw-medium shadow-sm">
                    <i class="bi bi-mortarboard-fill me-2"></i>
                    Teacher Portal
                </span>
            </div>

            <!-- Optional: Welcome Student Name -->
            <p class="text-white-50  small mt-3 mb-0">
                Welcome back, <strong>{{ user.get_full_name|default:user.username }}</strong> 
            </p>
        </div>
    </div>

    <div class="mt-4">
        <nav class="nav flex-column px-3">
            <!-- Dashboard -->
            <a class="nav-link text-light {% if request.path == '/teacher/dashboard/' %}active{% endif %}" href="{% url 'teacher_dashboard' %}">
                <i class="bi bi-speedometer2 me-3 fs-5"></i>
                <span>My Dashboard</span>
            </a>

            <!-- My Timetable -->
            <a class="nav-link text-light" href="{% url 'teacher_timetable' %}">
                <i class="bi bi-calendar-week me-3 fs-5 text-info"></i>
                <span>My Timetable</span>
            </a>

            <!-- My Subjects -->
            <a class="nav-link text-light" href="{% url 'teacher_subjects'%}">
                <i class="bi bi-book me-3 fs-5 text-success"></i>
                <span>My Subjects</span>
            </a>

           <!-- My Class -->
            <a class="nav-link text-light" href="{% url 'teacher_my_classes' %}">
                <i class="bi bi-building-fill me-3 fs-5 text-info"></i>
                <span>My Classes</span>
            </a>

            <!-- Attendance -->
            <div class="nav-category text-light small fw-bold mt-4 mb-2 opacity-75">ATTENDANCE</div>
            <a class="nav-link text-light" href="{% url 'teacher_attendance_manual' %}">
                <i class="bi bi-check2-square me-3 fs-5 text-warning"></i>
                <span>Manual Attendance</span>
            </a>
            <a class="nav-link text-light" href="{% url 'teacher_qr_attendance' %}">
                <i class="bi bi-qr-code-scan me-3 fs-5 text-primary"></i>
                <span>QR Attendance</span>
            </a>

            <!-- Grades -->
            <div class="nav-category text-light small fw-bold mt-4 mb-2 opacity-75">GRADES</div>
            <a class="nav-link text-light" href="{% url 'teacher_enter_scores' %}">
                <i class="bi bi-clipboard2-check-fill me-3 fs-5 text-danger"></i>
                <span>Enter Scores</span>
            </a>

            <!-- Communication -->
            <div class="nav-category text-light small fw-bold mt-4 mb-2 opacity-75">COMMUNICATION</div>
            <a class="nav-link text-light" href="{% url 'teacher_chat' %}">
                <i class="bi bi-chat-dots-fill me-3 fs-5 text-cyan"></i>
                <span>Messages</span>
                {% if unread_messages > 0 %}
                    <span class="badge bg-danger rounded-pill ms-2">{{ unread_messages }}</span>
                {% endif %}
            </a>

            <a class="nav-link text-light d-flex align-items-center justify-content-between position-relative" 
            href="{% url 'teacher_notifications' %}">
                <div class="d-flex align-items-center">
                    <i class="bi bi-bell me-3 fs-5 text-info"></i>
                    <span>My Notifications</span>
                </div>
                {% if unread_count > 0 %}
                    <span class="badge bg-danger rounded-pill position-absolute end-0 translate-middle-y"
                        style="font-size: 0.7rem; top: 50%;">
                        {{ unread_count }}
                    </span>
                {% endif %}
            </a>

            <a class="nav-link d-flex align-items-center py-2" href="{% url 'ai_chat_page' %}">
                <i class="bi bi-robot text-primary me-3" style="font-size: 1.3rem;"></i>
                <span class="fw-medium">AI Assistant</span>
                <small class="badge bg-success rounded-pill ms-auto opacity-75">Online</small>
            </a>

            <!-- Profile & Logout -->
            <div class="nav-category text-light small fw-bold mt-4 mb-2 opacity-75">ACCOUNT</div>
            <a class="nav-link text-light" href="{% url 'my_profile' %}">
                <i class="bi bi-person-circle me-3 fs-5"></i>
                <span>My Profile</span>
            </a>

            <form method="post" action="{% url 'logout' %}" class="mt-4">
                {% csrf_token %}
                <button type="submit" class="nav-link text-danger border-0 bg-transparent p-0 text-start w-100 d-flex align-items-center">
                    <i class="bi bi-box-arrow-right me-3 fs-5"></i>
                    <span>Logout</span>
                </button>
            </form>
        </nav>
    </div>
</div>

<!-- Mobile Toggle Button -->
<button class="btn btn-primary position-fixed bottom-0 start-0 m-4 rounded-circle shadow-lg d-lg-none"
        style="width:60px;height:60px;z-index:1000;" onclick="toggleSidebar()">
    <i class="bi bi-list fs-3"></i>
</button>

<style>
    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 280px;
        height: 100%;
        background: #1e3a8a;
        z-index: 1000;
        overflow-y: auto;
        transition: left 0.3s ease;
    }
    .nav-link {
        padding: 0.8rem 1.2rem;
        border-radius: 12px;
        margin: 0.3rem 0;
        display: flex;
        align-items: center;
        transition: all 0.3s;
    }
    .nav-link:hover {
        background: rgba(255,255,255,0.15);
        transform: translateX(8px);
    }
    .nav-link.active {
        background: #3b82f6;
        font-weight: 700;
    }
    .nav-category {
        padding: 0.8rem 1.2rem;
        letter-spacing: 1.5px;
        font-size: 0.85rem;
        opacity: 0.8;
    }
    .badge {
        font-size: 0.8rem;
    }
</style>

<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('teacherSidebar');
        sidebar.style.left = sidebar.style.left === '0px' ? '-280px' : '0px';
    }
</script>